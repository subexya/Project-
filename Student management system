#include <iostream>
#include <fstream>
#include <cstring>
using namespace std;
 
// Student structure
struct Student {
   int rollNo;
   char name[50];
   float marks;
};
 
// Add a student record
void addStudent() {
   Student s;
   cout << "Enter Roll Number: ";
   cin >> s.rollNo;
   cin.ignore();
   cout << "Enter Name: ";
   cin.getline(s.name, 50);
   cout << "Enter Marks: ";
   cin >> s.marks;
 
   ofstream fout("students.txt", ios::app);
   if (!fout) {
       cout << "Error opening file!" << endl;
       return;
   }
 
   fout << s.rollNo << '\t' << s.name << '\t' << s.marks << endl;
   fout.close();
   cout << "Student record added.\n";
}
 
// Display all records
void displayStudents() {
   ifstream fin("students.txt");
   if (!fin) {
       cout << "No student records found.\n";
       return;
   }
   Student s;
   cout << "RollNo\tName\t\tMarks\n";
   cout << "-------------------------------\n";
   while (fin >> s.rollNo) {
       fin.get(); // skip tab
       fin.getline(s.name, 50, '\t');
       fin >> s.marks;
       fin.ignore(); // skip newline
       cout << s.rollNo << "\t" << s.name << "\t\t" << s.marks << endl;
   }
   fin.close();
}
 
// Search by roll number
void searchStudent() {
   int roll;
   cout << "Enter roll number to search: ";
   cin >> roll;
   ifstream fin("students.txt");
   if (!fin) {
       cout << "No student records found.\n";
       return;
   }
   Student s;
   bool found = false;
   while (fin >> s.rollNo) {
       fin.get(); // skip tab
       fin.getline(s.name, 50, '\t');
       fin >> s.marks;
       fin.ignore(); // skip newline
 
       if (s.rollNo == roll) {
           cout << "Record found:\n";
           cout << "RollNo: " << s.rollNo << "\nName: " << s.name << "\nMarks: " << s.marks << endl;
           found = true;
           break;
       }
   }
   if (!found)
       cout << "Student record not found.\n";
   fin.close();
}
 
int main() {
   int choice;
   do {
       cout << "STUDENT MANAGEMENT SYSTEM\n";
       cout << "1. Add \n2. Display \n3. Search \n4. Exit\n";
       cout << "Enter your choice: ";
       cin >> choice;
       switch (choice) {
           case 1: addStudent(); break;
           case 2: displayStudents(); break;
           case 3: searchStudent(); break;
           case 4: cout << "Exiting...\n"; break;
           default: cout << "Invalid choice!\n";
       }
   } while (choice != 4);
   return 0;
}
 
